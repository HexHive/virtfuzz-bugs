# An assertion failure in hw/usb/core.c from dwc2 usb controller

# An assertion failure in hw/usb/core.c from dwc2 usb controller

A similar bug was found [here](https://bugs.launchpad.net/qemu/+bug/1907042),
[here](https://bugs.launchpad.net/qemu/+bug/1525123/),
[here](https://gitlab.com/qemu-project/qemu/-/issues/119),
and [here](https://gitlab.com/qemu-project/qemu/-/issues/303).

## Root cause analysis

`epnum` is not enforced to 0 when `pid` is `USB_TOKEN_SETUP`
## More details

### Hypervisor, hypervisor version, upstream commit/tag, host

qemu, 6.1.50, c52d69e7dbaaed0ffdef8125e79218672c30161d, Ubuntu 18.04

### VM architecture, device, device type

arm, dwc2, usb

### Bug Type: Assertion Failure

### Existing bug reports


## Contact

Let us know if I need to provide more information.
